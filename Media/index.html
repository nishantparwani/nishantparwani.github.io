<!DOCTYPE html>
<html lang="en">
<head>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-Q54VJBZQ85');
</script>
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/logo.png">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Joint Library | Nishant Parwani</title>

<!-- Three.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<!-- GSAP -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>
<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  :root {
    --primary: #0a0a0a;
    --secondary: #1a1a1a;
    --accent: #fe4dae;
    --accent-light: #2d76e2;
    --accent-blue: #4d5afe;
    --text: #ffffff;
    --text-dim: #a0a0a0;
    --glass: rgba(255, 255, 255, 0.08);
    --glass-border: rgba(255, 255, 255, 0.1);
    --menu-bg: rgba(10, 10, 10, 0.3);
    --card-bg: rgba(20, 20, 30, 0.5);
  }

  html, body {
    width: 100%;
    min-height: 100vh;
    overflow-x: hidden;
    scroll-behavior: smooth;
  }

  body {
    font-family: 'Inter', sans-serif;
    background: var(--primary);
    color: var(--text);
    position: relative;
    font-size: 16px;
    line-height: 1.6;
  }

  /* WebGL Background */
  #webgl-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    pointer-events: none;
  }

  /* ===== MENU (same as experience page) ===== */
  .menu-toggle {
    position: fixed;
    top: 2rem;
    left: 2rem;
    width: 60px;
    height: 60px;
    background: var(--glass);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 1000;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .menu-toggle:hover {
    transform: scale(1.1);
    border-color: var(--accent);
    box-shadow: 0 0 30px rgba(254, 77, 174, 0.3);
  }

  .menu-toggle span {
    width: 24px;
    height: 2px;
    background: var(--text);
    margin: 2px 0;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .menu-toggle.active span:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px);
  }
  .menu-toggle.active span:nth-child(2) {
    opacity: 0;
  }
  .menu-toggle.active span:nth-child(3) {
    transform: rotate(-45deg) translate(5px, -5px);
  }

  /* Navigation Menu */
  .nav-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: var(--menu-bg);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    z-index: 999;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
  }
  .nav-menu.active {
    opacity: 1;
    visibility: visible;
  }
  .nav-items {
    display: flex;
    flex-direction: column;
    gap: 3rem;
    text-align: center;
  }
  .nav-item {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 5rem;
    font-weight: 700;
    color: var(--text);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    text-decoration: none;
    letter-spacing: 1px;
    opacity: 0;
    transform: translateY(20px);
    text-shadow: 0 2px 15px rgba(0,0,0,0.5);
  }
  .nav-item:hover {
    color: var(--accent-blue);
    letter-spacing: 3px;
    text-shadow: 0 0 30px rgba(77, 90, 254, 0.7);
  }
  .nav-item::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 3px;
    background: var(--accent);
    transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  .nav-item:hover::after {
    width: 120%;
  }

  /* main content */
  .library-section {
    min-height: 100vh;
    padding: 8rem 2rem 6rem;
    position: relative;
    z-index: 2;
  }

  .container {
    max-width: 1400px;
    margin: 0 auto;
  }

  /* header exactly like experience page */
  .library-header {
    text-align: center;
    margin-bottom: 5rem;
    opacity: 0;
    transform: translateY(30px);
  }

  .library-title {
    font-family: 'Space Grotesk', sans-serif;
    font-size: clamp(3rem, 8vw, 5.5rem);
    font-weight: 700;
    line-height: 1.1;
    margin-bottom: 1.5rem;
    background: linear-gradient(135deg, var(--accent-blue), var(--accent));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }

  .library-subtitle {
    font-size: 1.3rem;
    color: var(--text-dim);
    max-width: 700px;
    margin: 0 auto;
    line-height: 1.6;
  }

  /* grid layout - 4 columns */
  .doc-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 2rem;
    margin: 3rem 0 5rem;
  }

  /* premium glass card */
  .doc-card {
    background: var(--card-bg);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid var(--glass-border);
    border-radius: 24px;
    padding: 1.8rem 1.5rem 1.5rem;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    position: relative;
    overflow: hidden;
    opacity: 0;
    transform: translateY(20px);
  }

  .doc-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(77, 90, 254, 0.1), transparent);
    transition: left 0.6s ease;
  }

  .doc-card:hover {
    transform: translateY(-8px);
    border-color: var(--accent-blue);
    box-shadow: 0 20px 40px rgba(0,0,0,0.4), 0 0 0 2px rgba(77,90,254,0.3);
  }

  .doc-card:hover::before {
    left: 100%;
  }

  /* icon area */
  .doc-icon {
    font-size: 3.5rem;
    margin-bottom: 1rem;
    color: var(--accent-blue);
    transition: all 0.3s ease;
    width: 80px;
    height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(77, 90, 254, 0.1);
    border-radius: 20px;
    border: 1px solid rgba(77, 90, 254, 0.3);
  }

  .doc-card:hover .doc-icon {
    transform: scale(1.05);
    color: var(--accent);
    border-color: var(--accent);
  }

  .doc-title {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 1.2rem;
    font-weight: 600;
    margin: 0.8rem 0 1rem;
    color: var(--text);
    line-height: 1.4;
    word-break: break-word;
  }

  /* button group */
  .doc-actions {
    display: flex;
    gap: 0.8rem;
    width: 100%;
    margin-top: 0.5rem;
  }

  .doc-btn {
    flex: 1;
    padding: 0.7rem 0.5rem;
    border: none;
    border-radius: 40px;
    font-family: 'Inter', sans-serif;
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    background: var(--glass);
    backdrop-filter: blur(5px);
    border: 1px solid var(--glass-border);
    color: var(--text);
    text-decoration: none;
  }

  .doc-btn.preview {
    background: linear-gradient(135deg, rgba(77, 90, 254, 0.2), rgba(77, 90, 254, 0.05));
    border-color: var(--accent-blue);
  }

  .doc-btn.download {
    background: linear-gradient(135deg, rgba(254, 77, 174, 0.2), rgba(254, 77, 174, 0.05));
    border-color: var(--accent);
  }

  .doc-btn:hover {
    transform: scale(1.02);
    background: var(--accent-blue);
    border-color: var(--accent-blue);
    color: white;
    box-shadow: 0 5px 15px rgba(77,90,254,0.4);
  }
  .doc-btn.download:hover {
    background: var(--accent);
    border-color: var(--accent);
    box-shadow: 0 5px 15px rgba(254,77,174,0.4);
  }

  /* submission & legal sections */
  .submission-section, .legal-section {
    background: var(--glass);
    backdrop-filter: blur(15px);
    border: 1px solid var(--glass-border);
    border-radius: 32px;
    padding: 3rem;
    margin: 3rem 0;
    transition: all 0.5s ease;
  }

  .submission-section:hover, .legal-section:hover {
    border-color: var(--accent-blue);
    box-shadow: 0 10px 40px rgba(77,90,254,0.2);
  }

  .section-heading {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 2rem;
    margin-bottom: 1.5rem;
    background: linear-gradient(135deg, #fff, var(--accent-blue));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    display: inline-block;
  }

  .policy-text, .legal-text {
    color: var(--text-dim);
    font-size: 1.1rem;
    line-height: 1.7;
    margin-bottom: 1.5rem;
  }

  .policy-list {
    list-style: none;
    padding: 0;
  }
  .policy-list li {
    margin-bottom: 1rem;
    padding-left: 2rem;
    position: relative;
    color: var(--text-dim);
  }
  .policy-list li i {
    position: absolute;
    left: 0;
    top: 3px;
    color: var(--accent-blue);
  }

  .email-highlight {
    color: var(--accent);
    font-weight: 500;
    border-bottom: 1px dashed var(--accent);
  }

  .legal-note {
    font-style: normal;
    border-left: 3px solid var(--accent);
    padding-left: 1.5rem;
    margin-top: 2rem;
  }

  /* footer */
  .follow-footer {
    position: relative;
    bottom: auto;
    margin: 4rem auto 2rem;
    width: 80%;
    max-width: 500px;
    background: rgba(71, 70, 70, 0.2);
    backdrop-filter: blur(6px);
    color: #fff;
    text-align: center;
    padding: 0.7rem 1.5rem;
    font-family: 'Montserrat', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    letter-spacing: 4px;
    font-weight: 700;
    font-size: 0.9rem;
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 8px;
    z-index: 100;
  }
  .follow-footer .social-icons {
    display: flex;
    gap: 1.5rem;
    font-size: 1.2rem;
    margin: 0.4rem 0;
  }
  .follow-footer a { color: #fff; transition: color 0.3s; }
  .follow-footer a:hover { color: var(--accent-blue); }
  .copyright { font-size: 0.65rem; color: #aaa; }

  /* responsive */
  @media (max-width: 1100px) {
    .doc-grid { grid-template-columns: repeat(3, 1fr); }
  }
  @media (max-width: 800px) {
    .doc-grid { grid-template-columns: repeat(2, 1fr); }
    .nav-item { font-size: 4rem; }
  }
  @media (max-width: 500px) {
    .doc-grid { grid-template-columns: 1fr; }
    .library-section { padding: 6rem 1rem 3rem; }
    .submission-section, .legal-section { padding: 2rem; }
    .nav-item { font-size: 3rem; }
  }

  /* cursor effects */
  #cursor-shadow, #cursor-inner {
    position: fixed;
    pointer-events: none;
    z-index: 9999;
    transform: translate(-50%, -50%);
    border-radius: 50%;
  }
  #cursor-shadow {
    width: 60px; height: 60px;
    background: radial-gradient(circle, transparent 0%, rgba(255,255,255,0.15) 30%, rgba(255,255,255,0.3) 100%);
    mix-blend-mode: difference;
    transition: width 0.2s, height 0.2s;
  }
  #cursor-inner {
    width: 8px; height: 8px;
    background: white;
    box-shadow: 0 0 15px white;
  }
  body { cursor: none; }
</style>
</head>
<body>

<div id="cursor-shadow"></div>
<div id="cursor-inner"></div>
<canvas id="webgl-bg"></canvas>

<!-- menu toggle -->
<div class="menu-toggle" id="menuToggle">
  <span></span><span></span><span></span>
</div>

<!-- nav menu -->
<div class="nav-menu" id="navMenu">
  <div class="nav-items">
    <a href="/indexx" class="nav-item" style="opacity:0;">Home</a>
    <a href="/aboutnishant" class="nav-item" style="opacity:0;">About</a>
    <a href="/nishantsexperience" class="nav-item" style="opacity:0;">Experience</a>
    <a href="/Media/index.html" class="nav-item" style="opacity:0;">Library</a>
  </div>
</div>

<!-- main library content -->
<section class="library-section">
  <div class="container">

    <!-- header -->
    <div class="library-header">
      <h1 class="library-title">JOINT LIBRARY</h1>
      <p class="library-subtitle">curated research, analyses, and presentations</p>
    </div>

    <!-- document grid (static files from /Media) -->
    <div class="doc-grid" id="docGrid">
      <!-- card 1 - sample PDF -->
      <div class="doc-card">
        <div class="doc-icon"><i class="fas fa-file-pdf"></i></div>
        <h3 class="doc-title">2024_market_analysis.pdf</h3>
        <div class="doc-actions">
          <a href="/Media/2024_market_analysis.pdf" target="_blank" class="doc-btn preview"><i class="fas fa-eye"></i> Preview</a>
          <a href="/Media/2024_market_analysis.pdf" download class="doc-btn download"><i class="fas fa-download"></i> Download</a>
        </div>
      </div>
      <!-- card 2 - PPT -->
      <div class="doc-card">
        <div class="doc-icon"><i class="fas fa-file-powerpoint"></i></div>
        <h3 class="doc-title">Q3_presentation.pptx</h3>
        <div class="doc-actions">
          <a href="/Media/Q3_presentation.pptx" target="_blank" class="doc-btn preview"><i class="fas fa-eye"></i> Preview</a>
          <a href="/Media/Q3_presentation.pptx" download class="doc-btn download"><i class="fas fa-download"></i> Download</a>
        </div>
      </div>
      <!-- card 3 - PDF -->
      <div class="doc-card">
        <div class="doc-icon"><i class="fas fa-file-pdf"></i></div>
        <h3 class="doc-title">research_notes_2025.pdf</h3>
        <div class="doc-actions">
          <a href="/Media/research_notes_2025.pdf" target="_blank" class="doc-btn preview"><i class="fas fa-eye"></i> Preview</a>
          <a href="/Media/research_notes_2025.pdf" download class="doc-btn download"><i class="fas fa-download"></i> Download</a>
        </div>
      </div>
      <!-- card 4 - PPT -->
      <div class="doc-card">
        <div class="doc-icon"><i class="fas fa-file-powerpoint"></i></div>
        <h3 class="doc-title">strategy_deck.pptx</h3>
        <div class="doc-actions">
          <a href="/Media/strategy_deck.pptx" target="_blank" class="doc-btn preview"><i class="fas fa-eye"></i> Preview</a>
          <a href="/Media/strategy_deck.pptx" download class="doc-btn download"><i class="fas fa-download"></i> Download</a>
        </div>
      </div>
      <!-- card 5 - PDF -->
      <div class="doc-card">
        <div class="doc-icon"><i class="fas fa-file-pdf"></i></div>
        <h3 class="doc-title">industry_analysis.pdf</h3>
        <div class="doc-actions">
          <a href="/Media/industry_analysis.pdf" target="_blank" class="doc-btn preview"><i class="fas fa-eye"></i> Preview</a>
          <a href="/Media/industry_analysis.pdf" download class="doc-btn download"><i class="fas fa-download"></i> Download</a>
        </div>
      </div>
      <!-- card 6 - PPT -->
      <div class="doc-card">
        <div class="doc-icon"><i class="fas fa-file-powerpoint"></i></div>
        <h3 class="doc-title">innovation_lab.pptx</h3>
        <div class="doc-actions">
          <a href="/Media/innovation_lab.pptx" target="_blank" class="doc-btn preview"><i class="fas fa-eye"></i> Preview</a>
          <a href="/Media/innovation_lab.pptx" download class="doc-btn download"><i class="fas fa-download"></i> Download</a>
        </div>
      </div>
      <!-- card 7 - PDF -->
      <div class="doc-card">
        <div class="doc-icon"><i class="fas fa-file-pdf"></i></div>
        <h3 class="doc-title">consumer_trends.pdf</h3>
        <div class="doc-actions">
          <a href="/Media/consumer_trends.pdf" target="_blank" class="doc-btn preview"><i class="fas fa-eye"></i> Preview</a>
          <a href="/Media/consumer_trends.pdf" download class="doc-btn download"><i class="fas fa-download"></i> Download</a>
        </div>
      </div>
      <!-- card 8 - PPT -->
      <div class="doc-card">
        <div class="doc-icon"><i class="fas fa-file-powerpoint"></i></div>
        <h3 class="doc-title">investor_summary.pptx</h3>
        <div class="doc-actions">
          <a href="/Media/investor_summary.pptx" target="_blank" class="doc-btn preview"><i class="fas fa-eye"></i> Preview</a>
          <a href="/Media/investor_summary.pptx" download class="doc-btn download"><i class="fas fa-download"></i> Download</a>
        </div>
      </div>
    </div>

    <!-- submission section (moderated) -->
    <div class="submission-section">
      <h2 class="section-heading">Submit your work</h2>
      <p class="policy-text">We welcome contributions that demonstrate <strong>ingenuity, originality, correctness, and relevance</strong>. All submissions are reviewed before publication.</p>
      <ul class="policy-list">
        <li><i class="fas fa-check-circle"></i> Include author name and designation <strong>inside the document</strong></li>
        <li><i class="fas fa-envelope"></i> Or email an editable copy to <span class="email-highlight">contact@nishantparwani.com</span></li>
        <li><i class="fas fa-clock"></i> If approved, work is typically published within 48 hours</li>
      </ul>
      <p class="policy-text" style="font-style:italic; margin-top:1.5rem;">Submissions become part of a curated academic repository — no automatic publishing.</p>
    </div>

    <!-- legal / IP notice (paraphrased properly) -->
    <div class="legal-section">
      <h2 class="section-heading">Intellectual property notice</h2>
      <div class="legal-text">
        <p>All materials featured in this library are the proprietary intellectual works of Nishant Parwani, unless otherwise credited. They are made available for non‑commercial use with proper attribution.</p>
        <p class="legal-note"><i class="fas fa-scale-balanced" style="margin-right:10px; color:var(--accent);"></i> Any commercial use, redistribution for profit, or derivative commercial application requires prior written permission from Nishant Parwani. Unauthorized reproduction or exploitation is strictly prohibited.</p>
        <p style="margin-top:1rem; color:#bbb;">For licensing inquiries, please contact the email above.</p>
      </div>
    </div>

    <!-- footer (exact same as main site) -->
    <footer class="follow-footer">
      <div class="follow-text">FOLLOW NISHANT</div>
      <div class="social-icons">
        <a href="https://www.instagram.com/nishant_parwani/" target="_blank"><i class="fab fa-instagram"></i></a>
        <a href="https://www.linkedin.com/in/nishant-parwani/" target="_blank"><i class="fab fa-linkedin"></i></a>
        <a href="mailto:nishantparwani2007@gmail.com"><i class="fas fa-envelope"></i></a>
        <a href="https://x.com/nishant_parwani" target="_blank"><i class="fab fa-x-twitter"></i></a>
      </div>
      <div class="copyright">&copy; Nishant Parwani. All rights reserved.</div>
    </footer>
  </div>
</section>

<script>
  // === WEBGL BACKGROUND (identical to experience page) ===
  function initWebGLBackground() {
    const canvas = document.getElementById('webgl-bg');
    if (!canvas) return;
    try {
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

      const gridHelper = new THREE.GridHelper(200,200,0x4d5afe,0x4d5afe);
      gridHelper.material.opacity = 0.08;
      gridHelper.material.transparent = true;
      scene.add(gridHelper);

      const pyramids = [];
      for (let i=0; i<40; i++) {
        const geo = new THREE.ConeGeometry(0.6,1.2,4);
        const isRed = i < 12;
        const mat = new THREE.MeshBasicMaterial({ color: isRed ? 0xfe4dae : 0x4d5afe, wireframe: true, transparent:true, opacity:0.15+Math.random()*0.25 });
        const pyr = new THREE.Mesh(geo, mat);
        pyr.position.set((Math.random()-0.5)*80, (Math.random()-0.5)*30, (Math.random()-0.5)*80);
        pyr.rotation.set(Math.random()*Math.PI, Math.random()*Math.PI, Math.random()*Math.PI);
        pyr.userData = { speedX:(Math.random()-0.5)*0.008, speedY:(Math.random()-0.5)*0.008, speedZ:(Math.random()-0.5)*0.008, floatSpeed:0.5+Math.random(), amp:0.2+Math.random()*0.6 };
        scene.add(pyr);
        pyramids.push(pyr);
      }

      const cubes = [];
      for (let i=0; i<25; i++) {
        const geo = new THREE.BoxGeometry(0.5,0.5,0.5);
        const mat = new THREE.MeshBasicMaterial({ color:0x6d7cff, wireframe:true, transparent:true, opacity:0.08 });
        const cube = new THREE.Mesh(geo, mat);
        cube.position.set((Math.random()-0.5)*90, (Math.random()-0.5)*30, (Math.random()-0.5)*90);
        cube.rotation.set(Math.random()*Math.PI, Math.random()*Math.PI, 0);
        cube.userData = { speedX:(Math.random()-0.5)*0.006, speedY:(Math.random()-0.5)*0.006 };
        scene.add(cube);
        cubes.push(cube);
      }

      const particleCount=150;
      const particleGeo = new THREE.BufferGeometry();
      const pos = new Float32Array(particleCount*3);
      const colors = new Float32Array(particleCount*3);
      for(let i=0; i<particleCount*3; i+=3){
        pos[i]=(Math.random()-0.5)*200;
        pos[i+1]=(Math.random()-0.5)*40;
        pos[i+2]=(Math.random()-0.5)*200;
        const isRed=Math.random()<0.3;
        colors[i]=isRed?0.99:0.3;
        colors[i+1]=isRed?0.3:0.35;
        colors[i+2]=isRed?0.68:1.0;
      }
      particleGeo.setAttribute('position', new THREE.BufferAttribute(pos,3));
      particleGeo.setAttribute('color', new THREE.BufferAttribute(colors,3));
      const particleMat = new THREE.PointsMaterial({ size:0.04, transparent:true, opacity:0.2, blending:THREE.AdditiveBlending, vertexColors:true });
      const particles = new THREE.Points(particleGeo, particleMat);
      scene.add(particles);

      camera.position.set(0,10,40);
      let mouseX=0, mouseY=0;
      document.addEventListener('mousemove', (e) => { mouseX=(e.clientX/window.innerWidth)*2-1; mouseY=-(e.clientY/window.innerHeight)*2+1; });

      function animate(){
        requestAnimationFrame(animate);
        const time = Date.now()*0.001;
        gridHelper.rotation.y += 0.0002;
        pyramids.forEach((p,i)=>{
          p.rotation.x += p.userData.speedX;
          p.rotation.y += p.userData.speedY;
          p.rotation.z += p.userData.speedZ;
          p.position.y += Math.sin(time*p.userData.floatSpeed + i)*0.006 * p.userData.amp;
        });
        cubes.forEach((c,i)=>{
          c.rotation.x += c.userData.speedX;
          c.rotation.y += c.userData.speedY;
          c.position.y += Math.sin(time*0.5+i)*0.003;
        });
        particles.rotation.y += 0.00015;
        camera.position.x += (mouseX*15 - camera.position.x)*0.05;
        camera.position.y += (mouseY*8 - camera.position.y)*0.05;
        camera.lookAt(scene.position);
        renderer.render(scene,camera);
      }
      animate();
      window.addEventListener('resize', ()=>{
        camera.aspect = window.innerWidth/window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth,window.innerHeight);
      });
    } catch(e){ canvas.style.display='none'; }
  }

  // === MENU TOGGLE (identical) ===
  function initMenuToggle(){
    const toggle = document.getElementById('menuToggle');
    const menu = document.getElementById('navMenu');
    const items = document.querySelectorAll('.nav-item');
    if(!toggle||!menu) return;
    toggle.addEventListener('click', (e)=>{
      e.stopPropagation();
      toggle.classList.toggle('active');
      menu.classList.toggle('active');
      if(menu.classList.contains('active')){
        items.forEach((it,idx)=> gsap.to(it, { opacity:1, y:0, duration:0.6, delay:idx*0.15, ease:"power3.out" }));
      } else {
        items.forEach(it=> gsap.to(it, { opacity:0, y:20, duration:0.4 }));
      }
    });
    items.forEach(it=>{
      it.addEventListener('click', (e)=>{
        e.preventDefault();
        items.forEach(i=> gsap.to(i,{opacity:0,y:20,duration:0.3}));
        setTimeout(()=>{ toggle.classList.remove('active'); menu.classList.remove('active'); },300);
        setTimeout(()=>{ window.location.href = it.getAttribute('href'); },400);
      });
    });
    document.addEventListener('click', (e)=>{
      if(menu.classList.contains('active') && !menu.contains(e.target) && !toggle.contains(e.target)){
        items.forEach(i=> gsap.to(i,{opacity:0,y:20,duration:0.3}));
        setTimeout(()=>{ toggle.classList.remove('active'); menu.classList.remove('active'); },300);
      }
    });
  }

  // === cursor effect (same as contact) ===
  function initMouseShadow(){
    const shadow=document.getElementById('cursor-shadow'), inner=document.getElementById('cursor-inner');
    if(!shadow||!inner) return;
    let mx=0,my=0, sx=0, sy=0, ix=0, iy=0;
    document.addEventListener('mousemove',(e)=>{ mx=e.clientX; my=e.clientY; });
    function animate(){
      sx += (mx - sx)*0.08; sy += (my - sy)*0.08;
      ix += (mx - ix)*0.2; iy += (my - iy)*0.2;
      shadow.style.left = sx+'px'; shadow.style.top = sy+'px';
      inner.style.left = ix+'px'; inner.style.top = iy+'px';
      requestAnimationFrame(animate);
    }
    animate();
    document.body.style.cursor = 'none';
  }

  // === animate cards on load ===
  function animateCards(){
    gsap.fromTo('.library-header', {opacity:0, y:30}, {opacity:1, y:0, duration:1, ease:"power3.out"});
    gsap.fromTo('.doc-card', {opacity:0, y:20}, {
      opacity:1, y:0, duration:0.8, stagger:0.1, delay:0.3, ease:"back.out(1.2)",
      onComplete: ()=>{
        gsap.fromTo('.submission-section', {opacity:0, y:30}, {opacity:1, y:0, duration:0.8});
        gsap.fromTo('.legal-section', {opacity:0, y:30}, {opacity:1, y:0, duration:0.8, delay:0.2});
      }
    });
  }

  document.addEventListener('DOMContentLoaded', ()=>{
    initWebGLBackground();
    initMenuToggle();
    initMouseShadow();
    animateCards();
  });
</script>
</body>
</html>
